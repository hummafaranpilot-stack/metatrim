<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="lib/img/icon-7.svg" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upsell - 3</title>
    <style>
        /* Base */
        body,
        h1,
        h2,
        p,
        ul,
        li {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            color: #222;
            box-sizing: border-box;
        }

        .container {
            max-width: 1100px;
            margin: auto;
            padding: 0 20px;
            text-align: center;
        }

        /* Sticky Banner */
        .sticky-reminder {
            position: sticky;
            text-align: center;
            top: 0;
            background: #fff9e6;
            color: #c00;
            font-weight: 700;
            padding: 12px 20px;
            font-size: 16px;
            z-index: 999;
            border-bottom: 2px solid #ffd700;
            width: 100%;
        }

        .bottom-reminder {
            background: #fff4e6;
            text-align: center;
            color: #c00;
            font-weight: 700;
            padding: 18px 20px;
            font-size: 16px;
            border-top: 2px solid #ffd700;
            margin-top: 40px;
        }

        /* Timer */
        .timer-bar {
            text-align: center;
            padding: 12px 0;
            background: linear-gradient(to right, #fff4e6, #fffaf2);
            font-size: 16px;
            color: #c00;
            font-weight: 600;
            border-radius: 10px;
            margin: 20px auto;
        }

        .timer-bar span {
            font-weight: 700;
            color: #d60000;
        }

        .upsell-intro {
            font-size: 20px;
            /* Increase font size */
            line-height: 1.7;
            /* Add more spacing between lines */
            margin-bottom: 20px;
            /* Add space below paragraph */
            font-weight: 600;
            /* Make it slightly bolder */
            color: #0a6bda;
            /* Optional: make it match the theme */
        }

        /* Top Section */
        .top-section h1 {
            font-size: 28px;
            color: #0a6bda;
            margin-bottom: 15px;
        }

        .top-section p {
            font-size: 17px;
            margin-bottom: 12px;
            line-height: 1.5;
        }

        /* Upgrade Boxes */
        .upgrades {
        display: flex;
        justify-content: center;
        gap: 25px;
        flex-wrap: wrap;
        align-items: flex-start; /* ensures all boxes start at top */
        }
        
        .upgrade-box {
        flex: 1 1 45%;
        min-width: 250px;
        max-width: 450px;
        background: #f5faff;
        padding: 25px 15px;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* ensures buttons stay at bottom */
        }
        
        /* Highlight Box */
        .upgrade-box.highlight {
        background: #e6f2ff;
        border: 2px solid #0a6bda;
        }
        
        /* Box Heading */
        .upgrade-box h2 {
        font-size: 22px;
        margin-bottom: 10px;
        color: #0a6bda;
        }
        
        /* Images */
        .upgrade-box img {
        max-width: 100%; /* ensures image fits box */
        width: auto; /* maintain aspect ratio */
        height: auto;
        margin: 15px auto; /* centers image */
        border-radius: 8px;
        }
        
        /* Text */
        .upgrade-box p {
        font-size: 16px;
        margin-bottom: 12px;
        }
        .cut {
            text-decoration: line-through;
            color: #c00;
            margin-right: 5px;
        }

        .cta-btn {
            display: inline-block;
            margin-top: 10px;
            background: #0a6bda;
            color: #fff;
            padding: 12px 28px;
            border-radius: 12px;
            font-size: 16px;
            text-decoration: none;
            font-weight: 700;
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15);
            transition: .3s;
        }

        .cta-btn:hover {
            transform: translateY(-1px);
            opacity: .95;
        }

        .no-thanks {
            display: inline-block;
            margin-top: 10px;
            font-size: 14px;
            color: #555;
            text-decoration: underline;
        }

        /* Most Popular Tag */
        .most-popular .tag {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ffd700;
            color: #000;
            font-weight: 700;
            font-size: 14px;
            padding: 5px 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Reviews */
        .reviews {
            margin: 50px auto;
        }

        .reviews h2 {
            font-size: 26px;
            color: #0a6bda;
            margin-bottom: 25px;
        }

        .review-list {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .review {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            max-width: 300px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            transition: .3s;
        }

        .review:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .review p {
            font-size: 15px;
            margin-bottom: 8px;
            color: #333;
        }

        .review span {
            font-size: 13px;
            color: #555;
            display: block;
            text-align: right;
        }

        .ingredients-section {
            display: flex;
            flex-direction: column;
            /* stack heading + image */
            justify-content: center;
            /* vertical alignment if needed */
            align-items: center;
            /* horizontal center */
            margin: 40px auto;
            text-align: center;
        }

        .ingredients-section h2 {
            font-size: 28px;
            color: #0a6bda;
            margin-bottom: 20px;
        }

        .ingredients-img-wrapper img {
            max-width: 700px;
            /* responsive */
            height: auto;
            display: block;
            /* ensures centering in wrapper */
        }

        /* Mobile */
        @media(max-width:768px) {
            .upgrade-box img {
            max-width: 90%; /* smaller on mobile */
            height: auto;
            }
            
            .upgrade-box {
            flex: 1 1 100%;
            max-width: 90%;
            }

            .cta-btn {
                font-size: 15px;
                padding: 10px 22px;
            }

            .top-section h1 {
                font-size: 22px;
            }

            .top-section p {
                font-size: 16px;
                line-height: 1.4;
            }

            .sticky-reminder,
            .bottom-reminder {
                font-size: 14px;
                padding: 10px;
            }

            .review-list {
                flex-direction: column;
                gap: 15px;
            }

            .ingredients-img-wrapper img {
            max-width: 450px !important;
            width: 180% !important;
            height: auto !important;
            margin: 0 auto !important;
            display: block !important;
            }
        }
    </style>
</head>

<body>

    <section class="upsell-wrapper">

        <!-- Sticky Reminder -->
        <div class="sticky-reminder">
            Grab your Neurozenix‚Ñ¢ Focus+ today <br> 1 bottle for just $39 or 3 bottles for only $99. <br>Sharper focus, clearer thinking,
            and a limited-time discount!
        </div>

        <!-- Timer -->
        <div class="timer-bar">
            ‚è≥ Wait! Your order is not completed yet. Offer Expires In: <span id="countdown">05:00</span>
        </div>

        <!-- Top Info -->
        <div class="container top-section">
            <h1>Brain Enhancement Formula (Neurozenix‚Ñ¢ Focus+) <br> A Must Have for Men Over 35</h1>
            <p>As men age, prostate issues, stress, and hormone imbalance directly affect mental clarity, focus, and memory. <br>That‚Äôs why
            Neurozenix‚Ñ¢ Focus+ is the perfect companion to your prostate or weight-loss supplement <br> it supports the part of your
            health most people ignore: your brain. </p><br>
            <p class="upsell-intro">
                Neurozenix‚Ñ¢ is a next-generation cognitive formula designed to restore sharp focus, boost mental clarity, and support
                long-term memory , all using science-backed nootropics your brain needs as you age.
            </p>

            <h3>MetaTrim BHB‚Ñ¢: </h3>
            <p>Converts fat into energy, curbs cravings, keeps you active.</p>

            <h3>ProstaPrime Support‚Ñ¢:</h3>
            <p> Supports prostate & bladder health, boosts overall vitality.</p>

            <h3>Neurozenix‚Ñ¢ Focus+:</h3>
            <p> Elevate Your Mind. Sharpen Focus. Boost Clarity..</p>

            <h3>Together:</h3>
            <p> Fat gone. Flow better. Think sharper. Feel unstoppable. üî•</p>
            <br>
            <h1>
                <p>Why Men Taking Prostate or Weight Loss Supplements Need This Tooüî•:</p>
            </h1>
            
            <p>Prostate discomfort, disturbed sleep, stress, and low energy can slow down your thinking and weaken memory.Neurozenix‚Ñ¢ helps counter all of that by delivering advanced nutrients that protect neurons, enhance concentration, and
            keep your mind sharp and active every day.</p>
            <h1>
                <p>3-Way Brain Support for Menüî•:</p>
            </h1>
            <ul style="text-align:left; max-width:600px; margin:15px auto;">
                <li>‚ö° Improves focus & mental energy so you stay sharp throughout the day.</li>
                <li>üß† Supports long-term memory that naturally declines with age.</li>
                <li>üåø Reduces brain fog & stress, helping you think clearly and make better decisions.</li>
                
            </ul>
        </div>

        <!-- Ingredients -->
        <div class="ingredients-section">
            <h2>Key Ingredients</h2>
            <div class="ingredients-img-wrapper">
                <img src="lib/img/creative1.png" alt="MetaTrim BHB Ingredients">
            </div>
        </div>
<!-- Ingredients -->
<div class="ingredients-section">
    
    <div class="ingredients-img-wrapper">
        <img src="lib/img/labels (1).png" alt="MetaTrim BHB Ingredients">
    </div>
</div>
        <!-- Upgrade Boxes -->
        <div class="container upgrades">

            <!-- 2 Bottle -->
            <div class="upgrade-box">
                <h2>1 Bottle Upgrade</h2>
                <img src="lib/img/greenbaseneuroxen-8b15a821 (1).png" alt="2 Bottle MetaTrim BHB‚Ñ¢">
                <p>Regular Price: <span class="cut">$69</span> <strong>$39 Today!</strong></p>
                <a href="#" class="cta-btn">Add 1 Bottles for $39</a><br>
                <a href="#" class="no-thanks">No thanks, continue</a>
            </div>

            <!-- 3 Bottle Most Popular -->
            <div class="upgrade-box highlight most-popular">
                <div class="tag">Most Popular</div>
                <h2>3 Bottle Upgrade</h2>
                <img src="lib/img/threebottles(1).png" alt="3 Bottle MetaTrim BHB‚Ñ¢"><br><br><br><br>
                <p>Regular Price: <span class="cut">$177</span> <strong>$99 Today!</strong></p>
                <a href="#" class="cta-btn">Yes! Add 3 Bottles for $99</a><br>
                <a href="#" class="no-thanks">No thanks, continue</a>
            </div>

        </div>

        <!-- Reviews -->
        <div class="container reviews">
            <h2>Trusted Customer Reviews</h2>
            <div class="review-list">
                <div class="review">
                    <p>‚ÄúWithin weeks, my focus sharpened and my memory improved. Neurozenix‚Ñ¢ Focus+ made brain health simple and effective! üß†‚ú®‚Äù</p>
                    <span>- Michael T ‚Ä¢ Austin, Texas</span>
                </div>
                <div class="review">
                    <p>‚ÄúMy memory is sharper, my focus is clearer, and even my doctor noticed the improvement! Neurozenix‚Ñ¢ Focus+ is amazing.‚Äù</p>
                    <span>- Jennifer C ‚Ä¢ Seattle, Washington</span>
                </div>
                <div class="review">
                    <p>‚ÄúI love that it‚Äôs all-natural. Safe, effective support for my brain. My focus and memory have never been better! üåøüß†.‚Äù</p>
                    <span>- Emily P ‚Ä¢ Denver, Colorado</span>
                </div>
            </div>
        </div>


        <div class="bottom-reminder">
            Grab your Neurozenix‚Ñ¢ Focus+ today <br> 1 bottle for just $39 or 3 bottles for only $99. <br>Sharper focus, clearer thinking,
                        and a limited-time discount!
            <br><a href="#" class="no-thanks">No thanks, continue</a>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
    /* TIMER */
    let t=300;
    const countdownEl=document.querySelector('.timer-bar span');
    setInterval(()=>{
        let m=String(Math.floor(t/60)).padStart(2,'0');
        let s=String(t%60).padStart(2,'0');
        countdownEl.textContent=`${m}:${s}`;
        if(t>0) t--;
    },1000);

});
        </script>

</body>

</html>


<link href="popup/css/style1.css" type="text/css" rel="stylesheet">
<section class="custom-social-proof">
    <div class="custom-notification">
        <div class="custom-notification-container">
            <div class="custom-notification-image-wrapper">
                <img src="popup/img/img/3bottle.png">
            </div>
            <div class="custom-notification-content-wrapper">
                <p class="custom-notification-content">
                    <span id="notify-customer">Eli H</span> - <span id="notify-state">TX</span><br> Purchased <strong><span id="notify-quantity">7</span></strong> Bottle(s) of <b>Neurozenix‚Ñ¢ Focus+</b> <small><span id="notify-ago">9 minutes ago</span></small>
                </p>
            </div>
        </div>
        <div class="custom-close"></div>
    </div>
</section>

<div class="popup-loading-wrapper" style="display:none;">
    <div class="popup">
        <figure class="product-image"></figure>
        <p>Reserving Your Bottle Of</p>
        <h2>Neurozenix‚Ñ¢ Focus+</h2>
        <img src="images/icon-loading.png" alt="" class="loading-image">
    </div>
</div>

<p id="loading-indicator" style="display:none;">Processing...</p>
<p id="crm-response-container" style="display:none;">Limelight messages will appear here...</p>

<script type="text/javascript" src="popup/js/jquery-3.5.1.min.js"></script> 
<script type="text/javascript" src="popup/js/slick.min.js"></script>
<script type="text/javascript" src="popup/js/social-proof.js"></script>
<script type="text/javascript" src="popup/js/scripts.js"></script>
<script type="text/javascript" src="popup/js/jquery.mask.min5e1f.js?v=2"></script>	

<script type="text/javascript">
$(document).ready(function () {
	$('#fields_phone').mask('000-000-0000');
	
  	$('.single-item').slick({
		arrows: false,
		dots: true,
		autoplay: true,
		autoplaySpeed: 2600,
  	});
  
	/*$('.loading-btn').click(function(e) {
		$('.popup-loading-wrapper').show();
		setTimeout(function() {
		  $('#lpFrm').submit();
		}, 2000);
		return false
	});*/
});
</script>
<script type="text/javascript" src="popup/bmf/assets/js/jquery.autocomplete.min.js"></script>
<script>
var smtKey = '';
var smtAuto = 0;
var smtVerify = 0;
var smartUrl = "https://us-autocomplete-pro.api.smartystreets.com/lookup?key=" + smtKey + "&prefer_geolocation=city";
var lastAddress1 = '';
var lastAddress2 = '';

if(typeof smtKey !== "undefined" && smtKey != '') {
	function submitAddress2() {
		if(lastAddress1 == '') {
			lastAddress1 = $('input[name="fields_address1"]').val();
			lastAddress1.replace('"', '');
		}
		lastAddress2 = $('input[name="fields_address2"]').val();
		lastAddress2.replace('"', '');
		var combAddr = lastAddress1 + ', ' + lastAddress2;
		$('input[name="fields_address1"]').val(combAddr);
		$('#app_common_modal').remove();
		$('#theForm').trigger('submit');
		return false;
	}

	var utils2 = (function () {
		return {
			escapeRegExChars: function (value) {
				return value.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&");
			},
			createNode: function (containerClass) {
				var div = document.createElement('div');
				div.className = containerClass;
				div.style.position = 'absolute';
				div.style.display = 'none';
				return div;
			}
		};
	}());

	$(document).ready(function(ee) {
		if(typeof smtAuto !== "undefined" && smtAuto == 1) {
			$('#fields_address1').autocomplete({
				serviceUrl: smartUrl,
				paramName: "search",
				ajaxSettings: {},
				minChars: 2,
				deferRequestBy: 400,
				transformResult: function(response) {
					if (typeof response === "undefined") { 
						return {
							"suggestions": []
						};
					} else if (typeof response == "string") { 
						respJson = JSON.parse(response); 
					} else {
						respJson = response;
					}
					if(!(respJson) || typeof respJson.suggestions === "undefined" || respJson.suggestions == null) {
						return {
							"suggestions": []
						};
					}
					
					return {
						suggestions: $.map(respJson.suggestions, function(dataItem) {
							return { value: dataItem.street_line + (dataItem.secondary != '' && dataItem.entries == 1 ? (', ' + dataItem.secondary) : '') , data: dataItem};
						})
					};
				},
				formatResult: function (suggestion, currentValue) {
					if(typeof suggestion.data === "undefined") {
						return "";
					} else {
						if (!currentValue) {
							return suggestion.data.text;
						}
				
						var pattern = '(' + utils2.escapeRegExChars(currentValue) + ')';
						
						var addrfull = suggestion.data.street_line + (
							suggestion.data.secondary != '' ? ( 
								suggestion.data.entries > 1 ? (', ' + suggestion.data.secondary + ' (' + suggestion.data.entries + ' entries)') : (', ' + suggestion.data.secondary) 
							) : '') + ', ' + suggestion.data.city + ' ' + suggestion.data.state + ' ' + suggestion.data.zipcode;  
				
						return addrfull
							.replace(new RegExp(pattern, 'gi'), '<strong>$1<\/strong>')
							.replace(/&/g, '&amp;')
							.replace(/</g, '&lt;')
							.replace(/>/g, '&gt;')
							.replace(/"/g, '&quot;')
							.replace(/&lt;(\/?strong)&gt;/g, '<$1>');
					}
				},
				onSelect: function (suggestion) {
					if($('#fields_city').length == 1 && (suggestion.data.city)) {
						$('#fields_city').val(suggestion.data.city);
					}
					if($('#fields_state').length == 1 && (suggestion.data.state)) {
						$('#fields_state').val(suggestion.data.state);
					}
					if($('#fields_zip').length == 1 && (suggestion.data.zipcode)) {
						$('#fields_zip').val(suggestion.data.zipcode);
					}
								
				}
			});
		}
	});

}


$('form.form123').find('#fields_email').on('change keyup', function() {
	var emailReg2 = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
	if ( !emailReg2.test($('#fields_email').val()) ) {
		$(this).addClass('has-error');
		$(this).removeClass('no-error');
	}
});

$('form.form123').find('#fields_zip').on('change keyup', function() {
	var zip = $('#fields_zip').val();
	if ((zip.length)< 5 ){
		$(this).addClass('has-error');
		$(this).removeClass('no-error');
	}
});

$('form#theForm').find('input, select, textarea').on('change keyup', function() {
	$('form#theForm').find('input, select').each(function() {
		if($(this).val()==''){
			$(this).addClass('has-error');
			$(this).removeClass('no-error');
		}else{
			$(this).removeClass('has-error');
			$(this).addClass('no-error');	
		}
	});
});


function validate_optin_form(){
	ShowExitPopup = false;
	internal = 1;
	isExit=false;

	var errors = new Array();
	var phonefilter = /^([0-9\-\+\(\)]{8,22})+$/ ;
	var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
	//var is_terms_condtion_cheked = $('#agree_terms').prop('checked'); 
	//console.log($('#fields_fname').val().replace(/^\s+|\s+$/g,"")==''));

	$("input").removeClass("has-error");
	
	if ($('#fields_fname').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your first name');
		$('#fields_fname').addClass("has-error");
	}
	if ($('#fields_lname').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your last name');
		$('#fields_lname').addClass("has-error");
	}
	if ($('#fields_address1').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please select your address');
		$('#fields_address1').addClass("has-error");
	}
	if ($('#fields_city').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your city');
		$('#fields_city').addClass("has-error");
	}
	if ($('#country').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your country');
		$('#country').addClass("has-error");
	}
	if ($('#fields_state').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your State');
		$('#fields_state').addClass("has-error");
	}
	if ($('#fields_zip').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your Zip Code');
		$('#fields_zip').addClass("has-error");
	}
	if ($('#fields_phone').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your phone number');
		$('#fields_phone').addClass("has-error");
	}
	if ($('#fields_email').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your email address');
		$('#fields_email').addClass("has-error");
	} else if ( !emailReg.test($('#fields_email').val()) ) {
		errors.push('Please enter valid email address');
		$('#fields_email').addClass("has-error");
	}
	
	/*if($('#agree_terms:checked').length == 0) {
	errors.push('Please accept our terms and condition');
	}*/
	
	
	if(typeof smtKey !== "undefined" && smtKey != '' && typeof smtVerify !== "undefined" && smtVerify == 1) {
		if (errors.length == 0 ) {
			var addr = $('input[name="fields_address1"]').val() + ', ' + $('input[name="fields_city"]').val() + ' ' + $('select[name="fields_state"]').val() + ' ' + $('input[name="fields_zip"]').val() ;
			var errmsg = "";
			var vcode = "";
			var apiUrl = "https://us-street.api.smartystreets.com/street-address"
				+ "?street=" + encodeURI(addr)
				+ "&key=" + smtKey;
			$.ajax({
			  url: apiUrl,
			  method: "get",
			  async: false,
			  beforeSend: function( xhr ) {
			  }
			})
			.done(function(resData) {
				var errmsg = "";
				if(!(resData) || !(resData[0]) || !(resData[0].analysis) || !(resData[0].analysis.dpv_match_code)) {
					vcode = "";
				} else {
					vcode = resData[0].analysis.dpv_match_code;
				}
				
				if(vcode != '' && vcode != 'N' && vcode != 'D') {
					if(typeof resData[0].delivery_line_1 !== "undefined" && resData[0].delivery_line_1 != "") {
						$('input[name="fields_address1"]').val(resData[0].delivery_line_1);
						lastAddress1 = $('input[name="fields_address1"]').val();
					}
					
					if(typeof resData[0].components !== "undefined") {
						if(typeof resData[0].components.city_name !== "undefined" && resData[0].components.city_name != "") {
							$('input[name="fields_city"]').val(resData[0].components.city_name);
						}
						if(typeof resData[0].components.zipcode !== "undefined" && resData[0].components.zipcode != "") {
							$('input[name="fields_zip"]').val(resData[0].components.zipcode);
						}
						if(typeof resData[0].components.state_abbreviation !== "undefined" && resData[0].components.state_abbreviation != "") {
							$('select[name="fields_state"]').val(resData[0].components.state_abbreviation);
						}
					}
					
				}
			})
			.fail(function() {
			})
			.always(function() {
			});
			
			
			if(vcode == '') {
				errors.push('Address could not be found');
			} else if(vcode == 'N') {
				errors.push('Address does not seem to be deliverable');
			} else if(vcode == 'D') {
				
				var html = '';
				html += '<div id="app_common_modal">';
				html += '<div class="app_modal_body" style="text-align:center;min-height:150px;"><a href="javascript:void(0);" id="app_common_modal_close">X</a>';
	
				html += '<div>'
					+ '<form method="get" action="" onSubmit="return submitAddress2();">'
					+ '<h4>' + "Please enter your Apartment/Suite/Unit # to proceed" + '</h4>'
					+ '<input type="text" name="fields_address2" id="fields_address2" placeholder="" autocomplete="off" required style="width:80%;line-height:22px;margin:10px;padding:5px" maxlength="50" value="'+ (lastAddress2 != '' ? lastAddress2 : '') +'" data-error-message="Please enter your address!" />'
					+ '<button type="submit" style="width:40%;height:30px;line-height:22px;cursor:pointer;">OK</button>'
					+ '</form>';
					+ '</div>';
	
				html += '</div>';
				html += '</div>';
				
				if (!$('#app_common_modal').length) {
					$('body').append(html);
				}
				$('#app_common_modal').fadeIn(500);
				return false;
				
			}
			
		}
	}
	
	
	if (errors.length == 0 ) {
		$('.popup-loading-wrapper').show();
		$('#fields_phone').unmask();
		document.getElementById('theForm').submit();
		return false;
	} else {
		var li = '';
		$.each(errors, function(key, value) {
			li += '<li>' + value + '</li>';
		});
	
		var html = '';
		html += '<div id="error_handler_overlay">';
		html += '<div class="error_handler_body"><a href="javascript:void(0);" id="error_handler_overlay_close">X</a><ul>' + li + '</ul></div>';
		html += '</div>';
	
		$('body').append(html);
	
		$('#error_handler_overlay').fadeIn(500);
		return false;
	}
}


$(function() {
	$(window).keydown(function(e) {
		if (e.which === 27 && $('#error_handler_overlay').length) {
			$('#error_handler_overlay').remove();
		}
	});
	
	$(document).off('click', '#error_handler_overlay');
	$(document).on('click', '#error_handler_overlay', function() {
		$(this).remove();
	});

	$(document).off('click', '#error_handler_overlay_close');
	$(document).on('click', '#error_handler_overlay_close', function() {
		$('#error_handler_overlay').remove();
	});

	$(document).on('click', '#app_common_modal_close', function() {
		//     alert('close');
		$('#app_common_modal').remove();
	});	
});

</script> 
<script>
function onlyNumbers(e,type)
{
	var keynum;
	var keychar;
	var numcheck;
	if(window.event) // IE
	{
		keynum = e.keyCode;
	}
	else if(e.which) // Netscape/Firefox/Opera
	{
		keynum = e.which;
	}
	keychar = String.fromCharCode(keynum);
	numcheck = /\d/;
	
	switch (keynum){
		case 8:    //backspace
		case 9:    //tab
		case 35:   //end
		case 36:   //home
		case 37:   //left arrow
		case 38:   //right arrow
		case 39:   //insert
		case 45:   //delete
		case 46:   //0
		case 48:   //1
		case 49:   //2
		case 50:   //3
		case 51:   //4
		case 52:   //5
		case 54:   //6
		case 55:   //7
		case 56:   //8
		case 57:   //9
		case 96:   //0
		case 97:   //1
		case 98:   //2
		case 99:   //3
		case 100:  //4
		case 101:  //5
		case 102:  //6
		case 103:  //7
		case 104:  //8
		case 105:  //9
			result2 = true;
			break;
		case 109: // dash -
			if (type == 'phone'){
				result2 = true;
			} else {
				result2 = false;
			}
			break;
		default:
			result2 = numcheck.test(keychar);
			break;
	}
	
	return result2;
}

function openNewWindow(page_url, type, window_name, width, height, top, left, features) {
    if (!type) {
        type = 'popup';
    }

    if (!width) {
        width = 480;
    }

    if (!height) {
        height = 480;
    }

    if (!top) {
        top = 50;
    }

    if (!left) {
        left = 50;
    }

    if (!features) {
        features = 'resizable,scrollbars';
    }

    if (type == 'popup') {
        var settings = 'height=' + height + ',';
        settings += 'width=' + width + ',';
        settings += 'top=' + top + ',';
        settings += 'left=' + left + ',';
        settings += features;

        win = window.open(page_url, window_name, settings);
        win.window.focus();
    } else if (type == 'modal') {
        var html = '';
        html += '<div id="app_common_modal">';
        html += '<div class="app_modal_body"><a href="javascript:void(0);" id="app_common_modal_close">X</a><iframe src="' + page_url + '" frameborder="0"></iframe></div>';
        html += '</div>';

        if (!$('#app_common_modal').length) {

            $('body').append(html);
        }
        $('#app_common_modal').fadeIn();
    }

}

<script>
// Preserve URL parameters across page navigation
(function() {
  // Get all URL parameters from current page
  var urlParams = new URLSearchParams(window.location.search);
  var paramString = urlParams.toString();

  if (paramString) {
    // Find all internal links (excluding external links, anchors, and special protocols)
    var links = document.querySelectorAll('a[href]');

    links.forEach(function(link) {
      var href = link.getAttribute('href');

      // Skip if it's an external link, anchor, mailto, tel, javascript, or #
      if (!href ||
          href.startsWith('http://') ||
          href.startsWith('https://') ||
          href.startsWith('mailto:') ||
          href.startsWith('tel:') ||
          href.startsWith('javascript:') ||
          href.startsWith('#')) {
        return;
      }

      // Add parameters to the link
      var separator = href.includes('?') ? '&' : '?';
      link.setAttribute('href', href + separator + paramString);
    });
  }
})();
</script>
<script>
// Preserve ALL URL parameters on checkout/buy buttons (with redirect parameter support)
(function() {
  var urlParams = new URLSearchParams(window.location.search);
  var paramString = urlParams.toString();

  if (!paramString) return; // Exit if no parameters

  function appendParams(url) {
    if (!url) return url;

    try {
      var urlObj = new URL(url);
      var redirectParam = urlObj.searchParams.get('redirect');

      // If there's a redirect parameter, decode and add params to it
      if (redirectParam) {
        try {
          // Decode base64 redirect URL
          var decodedRedirect = atob(redirectParam);

          // Add parameters to decoded redirect URL
          var separator = decodedRedirect.includes('?') ? '&' : '?';
          var updatedRedirect = decodedRedirect + separator + paramString;

          // Re-encode and update the redirect parameter
          urlObj.searchParams.set('redirect', btoa(updatedRedirect));
        } catch (e) {
          // If decode fails, redirect might not be base64, append params directly
          var separator = redirectParam.includes('?') ? '&' : '?';
          urlObj.searchParams.set('redirect', redirectParam + separator + paramString);
        }
      }

      // Also add parameters to the main URL
      paramString.split('&').forEach(function(param) {
        var parts = param.split('=');
        if (parts[0] && parts[1]) {
          urlObj.searchParams.set(parts[0], parts[1]);
        }
      });

      return urlObj.toString();
    } catch (e) {
      // Fallback: simple append if URL parsing fails
      var separator = url.includes('?') ? '&' : '?';
      return url + separator + paramString;
    }
  }

  function updateAllLinks() {
    // Update all external checkout links (href attribute)
    var externalLinks = document.querySelectorAll('a[href^="http"], a[href^="https"]');
    externalLinks.forEach(function(link) {
      var href = link.getAttribute('href');
      link.setAttribute('href', appendParams(href));
    });

    // Update data-url attributes (used by subscription toggle)
    var dataUrlElements = document.querySelectorAll('[data-url^="http"], [data-url^="https"]');
    dataUrlElements.forEach(function(element) {
      var dataUrl = element.getAttribute('data-url');
      element.setAttribute('data-url', appendParams(dataUrl));
    });
  }

  // Run on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updateAllLinks);
  } else {
    updateAllLinks();
  }
})();
</script>
</body>
</html>
