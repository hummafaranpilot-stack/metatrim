<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" href="lib/img/icon-7.svg" type="image/x-icon">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upsell 4 - Combo Offers</title>
<style>
/* Ensure full width and proper centering */
body, html {
margin: 0;
padding: 0;
width: 100%;
box-sizing: border-box;
}

.upsell-wrapper {
width: 100%;
display: flex;
flex-direction: column;
align-items: center; /* centers all content horizontally */
justify-content: center;
}

.container {
width: 100%;
max-width: 1200px;
padding: 0 15px; /* small padding for mobile */
margin: 0 auto;
display: flex;
flex-direction: column;
align-items: center;
text-align: center;
}
h1, h2, h3 {
    color:#0a6bda; 
    margin-bottom:10px;
}
p {
    margin-bottom:12px; 
    font-size:16px; 
    line-height:1.6;
}

/* Sticky Reminder - Centered */
.sticky-reminder {
position: sticky;
top: 0;
background: #fff9e6;
color: #c00;
font-weight: 700;
padding: 12px 20px;
border-bottom: 2px solid #ffd700;
z-index: 999;
text-align: center; /* center text */
width: 100%;
}

/* Intro Text */
.intro-text {
    max-width:900px; 
    margin:0 auto 40px auto; 
    text-align:left; 
    font-size:16px; 
    line-height:1.6;
}
.intro-text p {margin-bottom:12px;}

.upgrades {
display: flex;
justify-content: center; /* horizontally center */
flex-wrap: wrap; /* mobile par stack ho */
gap: 20px;
}

.upgrade-box {
flex: 0 1 300px; /* flexible width lekin limit 300px */
max-width: 350px;
margin: 0 auto;
border: 2px solid #ccc;
border-radius: 12px;
padding: 20px;
text-align: center;
background: #CEF2EE;
box-shadow: 0 6px 15px rgba(0,0,0,0.08);
}

/* Highlight popular combo */
.upgrade-box.popular {border: 2px solid #000000;}

/* Combo title */
.combo-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 15px;
    color: #0a6bda;
}

/* Product block */
.product-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 10px 0;
}

.product-block img {
max-width: 100%; /* container ke andar fit */
height: auto;
display: block;
margin: 0 auto; /* center align */
border-radius: 10px;
}

.product-name {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 5px;
}

/* Plus icon */
.plus-icon {
    font-size: 36px;
    font-weight: bold;
    color: green;
    display: block;
    margin: 10px auto;
    vertical-align: middle;
}

/* Price */
.upgrade-box p {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 10px 0;
}

/* Buttons */
.cta-btn, .no-thanks {
    display: inline-block;
    margin: 5px 10px;
    padding: 10px 18px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
}

.cta-btn {
    background: #0a6bda;
    color: #fff;
}

.no-thanks {
    background: #f5f5f5;
    color: #333;
    border: 1px solid #ccc;
}

/* Popular combo badge */
.upgrade-box.popular::before {
    content: "Most Popular";
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff6f00;
    color: #fff;
    font-weight:700;
    padding:5px 12px;
    border-radius:8px;
    font-size:13px;
}

/* Exclusive Combo Offers Box */
.exclusive-combo-box {
    border: 2px solid #000;
    background: #fff;
    color: #000000;
    padding: 20px 30px;
    text-align: center;
    max-width: 700px;
    margin: 30px auto;
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}

.exclusive-combo-box h2, .exclusive-combo-box h3 {
    font-weight:700;
    margin:10px 0;
}

/* Reviews Outside */
.reviews {
    max-width:1000px; 
    margin:30px auto; 
    display:flex; 
    justify-content:center; 
    gap:20px; 
    flex-wrap:wrap;
}
.review-card {
    background:#f9f9f9; 
    padding:15px; 
    border-radius:12px; 
    width:300px; 
    text-align:left; 
    box-shadow:0 3px 8px rgba(0,0,0,0.05);
}
.review-card p {
    font-size:14px; 
    margin-bottom:6px;
}
.review-card span {
    font-size:13px; 
    color:#555; 
    text-align:right; 
    display:block;
}

@media(max-width: 900px){
.upgrades {
flex-direction: column; /* vertically stack */
align-items: center;
}

.upgrade-box {
max-width: 90%; /* mobile par full width ka feel */
margin-bottom: 20px;
}

.product-block img {
max-width: 120px; /* mobile me chhoti image */
}
}
</style>
</head>
<body>

<div class="upsell-wrapper">

<div class="sticky-reminder">Select any combo for $29 each. VIP mega discounts appear as you add more!</div>

<!-- Exclusive Combo Offers Box -->
<div class="exclusive-combo-box">
    <h2>Exclusive Combo Offers</h2>
    <h3>Choose any combo below to see the difference:</h3>
    <p>Each combo includes two premium bottles, full product names clearly displayed, and a VIP pricing that is simple and affordable.</p>

    <p><span style="color:#FF4500; font-weight:bold; font-size:18px;">Combo 1:</span> ProstaPrime Support™ paired with MetaTrim BHB™ <br> (Offering complete prostate support and effective weight management in one powerful package.)</p>

    <p><span style="color:#1E90FF; font-weight:bold; font-size:18px;">Combo 2:</span> ProstaPrime Support™ paired with Neurozenix™ Focus+ <br> (Providing prostate health support along with enhanced cognitive function, sharper focus, and mental clarity.)</p>

    <p><span style="color:#32CD32; font-weight:bold; font-size:18px;">Combo 3:</span> MetaTrim BHB™ paired with Neurozenix™ Focus+ <br> (Giving fat burning energy plus boosted brain performance for sharper thinking and focus throughout the day.)</p>
</div>

<br>
<p style="text-align:center; font-size:16px;">
All combos are designed for simplicity and results. VIP customers get special discounts and access to bonus offers as they select more combos.
</p>

<h2 style="text-align:center; font-size:20px; font-weight:bold;">
Don’t wait – pick a combo that works best for your goals and unlock the full benefits today!
</h2>

<br><br>

<div class="upgrades">
    <!-- Combo 1 -->
    <div class="upgrade-box" data-combo="1">
        <div class="combo-title">Combo 1</div>
        <div class="product-block">
            <div class="product-name">ProstaPrime Support™</div>
            <img src="lib/img/2.png" alt="ProstaPrime Bottle">
        </div>
        <span class="plus-icon">+</span>
        <div class="product-block">
            <div class="product-name">MetaTrim BHB™</div>
            <img src="lib/img/3.png" alt="MetaTrim Bottle">
        </div>
        <p>Total Price: $29</p>
        <a href="#" class="cta-btn">Yes, Add to Cart</a>
    </div>

    <!-- Combo 2 -->
    <div class="upgrade-box popular" data-combo="2">
        <div class="combo-title">Combo 2</div>
        <div class="product-block">
            <div class="product-name">ProstaPrime Support™</div>
            <img src="lib/img/2.png" alt="ProstaPrime Bottle">
        </div>
        <span class="plus-icon">+</span>
        <div class="product-block">
            <div class="product-name">Neurozenix™ Focus+</div>
            <img src="lib/img/1.png" alt="Neurogenix Bottle">
        </div>
        <p>Total Price: $29</p>
        <a href="#" class="cta-btn">Yes, Add to Cart</a>
    </div>

    <!-- Combo 3 -->
    <div class="upgrade-box" data-combo="3">
        <div class="combo-title">Combo 3</div>
        <div class="product-block">
            <div class="product-name">MetaTrim BHB™</div>
            <img src="lib/img/3.png" alt="MetaTrim Bottle">
        </div>
        <span class="plus-icon">+</span>
        <div class="product-block">
            <div class="product-name">Neurozenix™ Focus+</div>
            <img src="lib/img/1.png" alt="Neurogenix Bottle">
        </div>
        <p>Total Price: $29</p>
        <a href="#" class="cta-btn">Yes, Add to Cart</a>
    </div>
</div>

<div style="text-align:center; margin-top:20px;">
  <a href="#" class="no-thanks" style="text-decoration:none; color:#FF4500; font-weight:bold;">
    I’ll pass this time and go with my previous order
  </a>
</div>

<!-- Reviews -->
<div class="reviews">
    <div class="review-card">
        <p>“Before using these, I had low energy. After trying this combo, my focus and vitality improved.”</p>
        <span>- John D., Combo 1</span>
    </div>
    <div class="review-card">
        <p>“My bladder and prostate support improved while I lost weight.”</p>
        <span>- Mike R., Combo 1</span>
    </div>
    <div class="review-card">
        <p>“Great value and results! Feeling healthier and lighter every day.”p>
        <span>- Sarah L., Combo 1</span>
    </div>

    <div class="review-card">
        <p>“Improved my prostate health while my focus and clarity skyrocketed.”p>
        <span>- Alex P., Combo 2</span>
    </div>
    <div class="review-card">
        <p>“This combo helped me feel sharper and more energized.”p>
        <span>- James K., Combo 2</span>
    </div>
    <div class="review-card">
        <p>“Amazing value! Both products complement each other perfectly.”p>
        <span>- David H., Combo 2</span>
    </div>

    <div class="review-card">
        <p>“Lost weight and felt sharper in mental clarity at the same time.”p>
        <span>- Anna W., Combo 3</span>
    </div>
    <div class="review-card">
        <p>“Best combo for energy, fat-burning, and brain support.”p>
        <span>- Tom L., Combo 3</span>
    </div>
    <div class="review-card">
        <p>“Highly recommend this combo for men who want all-in-one benefits.”p>
        <span>- chirs A., Combo 3</span>
    </div>
</div>

</div>
</body>
</html>


<link href="popup/css/style1.css" type="text/css" rel="stylesheet">
<section class="custom-social-proof">
    <div class="custom-notification">
        <div class="custom-notification-container">
            <div class="custom-notification-image-wrapper">
                <img src="popup/img/img/1bottle.png">
            </div>
            <div class="custom-notification-content-wrapper">
                <p class="custom-notification-content">
                    <span id="notify-customer">Eli H</span> - <span id="notify-state">TX</span><br> Purchased <strong><span id="notify-quantity">7</span></strong> Bottle(s) of <b>Metatrim BHB</b> <small><span id="notify-ago">9 minutes ago</span></small>
                </p>
            </div>
        </div>
        <div class="custom-close"></div>
    </div>
</section>

<div class="popup-loading-wrapper" style="display:none;">
    <div class="popup">
        <figure class="product-image"></figure>
        <p>Reserving Your Bottle Of</p>
        <h2>Metatrim BHB</h2>
        <img src="images/icon-loading.png" alt="" class="loading-image">
    </div>
</div>

<p id="loading-indicator" style="display:none;">Processing...</p>
<p id="crm-response-container" style="display:none;">Limelight messages will appear here...</p>

<script type="text/javascript" src="popup/js/jquery-3.5.1.min.js"></script> 
<script type="text/javascript" src="popup/js/slick.min.js"></script>
<script type="text/javascript" src="popup/js/social-proof.js"></script>
<script type="text/javascript" src="popup/js/scripts.js"></script>
<script type="text/javascript" src="popup/js/jquery.mask.min5e1f.js?v=2"></script>	

<script type="text/javascript">
$(document).ready(function () {
	$('#fields_phone').mask('000-000-0000');
	
  	$('.single-item').slick({
		arrows: false,
		dots: true,
		autoplay: true,
		autoplaySpeed: 2600,
  	});
  
	/*$('.loading-btn').click(function(e) {
		$('.popup-loading-wrapper').show();
		setTimeout(function() {
		  $('#lpFrm').submit();
		}, 2000);
		return false
	});*/
});
</script>
<script type="text/javascript" src="popup/bmf/assets/js/jquery.autocomplete.min.js"></script>
<script>
var smtKey = '';
var smtAuto = 0;
var smtVerify = 0;
var smartUrl = "https://us-autocomplete-pro.api.smartystreets.com/lookup?key=" + smtKey + "&prefer_geolocation=city";
var lastAddress1 = '';
var lastAddress2 = '';

if(typeof smtKey !== "undefined" && smtKey != '') {
	function submitAddress2() {
		if(lastAddress1 == '') {
			lastAddress1 = $('input[name="fields_address1"]').val();
			lastAddress1.replace('"', '');
		}
		lastAddress2 = $('input[name="fields_address2"]').val();
		lastAddress2.replace('"', '');
		var combAddr = lastAddress1 + ', ' + lastAddress2;
		$('input[name="fields_address1"]').val(combAddr);
		$('#app_common_modal').remove();
		$('#theForm').trigger('submit');
		return false;
	}

	var utils2 = (function () {
		return {
			escapeRegExChars: function (value) {
				return value.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&");
			},
			createNode: function (containerClass) {
				var div = document.createElement('div');
				div.className = containerClass;
				div.style.position = 'absolute';
				div.style.display = 'none';
				return div;
			}
		};
	}());

	$(document).ready(function(ee) {
		if(typeof smtAuto !== "undefined" && smtAuto == 1) {
			$('#fields_address1').autocomplete({
				serviceUrl: smartUrl,
				paramName: "search",
				ajaxSettings: {},
				minChars: 2,
				deferRequestBy: 400,
				transformResult: function(response) {
					if (typeof response === "undefined") { 
						return {
							"suggestions": []
						};
					} else if (typeof response == "string") { 
						respJson = JSON.parse(response); 
					} else {
						respJson = response;
					}
					if(!(respJson) || typeof respJson.suggestions === "undefined" || respJson.suggestions == null) {
						return {
							"suggestions": []
						};
					}
					
					return {
						suggestions: $.map(respJson.suggestions, function(dataItem) {
							return { value: dataItem.street_line + (dataItem.secondary != '' && dataItem.entries == 1 ? (', ' + dataItem.secondary) : '') , data: dataItem};
						})
					};
				},
				formatResult: function (suggestion, currentValue) {
					if(typeof suggestion.data === "undefined") {
						return "";
					} else {
						if (!currentValue) {
							return suggestion.data.text;
						}
				
						var pattern = '(' + utils2.escapeRegExChars(currentValue) + ')';
						
						var addrfull = suggestion.data.street_line + (
							suggestion.data.secondary != '' ? ( 
								suggestion.data.entries > 1 ? (', ' + suggestion.data.secondary + ' (' + suggestion.data.entries + ' entries)') : (', ' + suggestion.data.secondary) 
							) : '') + ', ' + suggestion.data.city + ' ' + suggestion.data.state + ' ' + suggestion.data.zipcode;  
				
						return addrfull
							.replace(new RegExp(pattern, 'gi'), '<strong>$1<\/strong>')
							.replace(/&/g, '&amp;')
							.replace(/</g, '&lt;')
							.replace(/>/g, '&gt;')
							.replace(/"/g, '&quot;')
							.replace(/&lt;(\/?strong)&gt;/g, '<$1>');
					}
				},
				onSelect: function (suggestion) {
					if($('#fields_city').length == 1 && (suggestion.data.city)) {
						$('#fields_city').val(suggestion.data.city);
					}
					if($('#fields_state').length == 1 && (suggestion.data.state)) {
						$('#fields_state').val(suggestion.data.state);
					}
					if($('#fields_zip').length == 1 && (suggestion.data.zipcode)) {
						$('#fields_zip').val(suggestion.data.zipcode);
					}
								
				}
			});
		}
	});

}


$('form.form123').find('#fields_email').on('change keyup', function() {
	var emailReg2 = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
	if ( !emailReg2.test($('#fields_email').val()) ) {
		$(this).addClass('has-error');
		$(this).removeClass('no-error');
	}
});

$('form.form123').find('#fields_zip').on('change keyup', function() {
	var zip = $('#fields_zip').val();
	if ((zip.length)< 5 ){
		$(this).addClass('has-error');
		$(this).removeClass('no-error');
	}
});

$('form#theForm').find('input, select, textarea').on('change keyup', function() {
	$('form#theForm').find('input, select').each(function() {
		if($(this).val()==''){
			$(this).addClass('has-error');
			$(this).removeClass('no-error');
		}else{
			$(this).removeClass('has-error');
			$(this).addClass('no-error');	
		}
	});
});


function validate_optin_form(){
	ShowExitPopup = false;
	internal = 1;
	isExit=false;

	var errors = new Array();
	var phonefilter = /^([0-9\-\+\(\)]{8,22})+$/ ;
	var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
	//var is_terms_condtion_cheked = $('#agree_terms').prop('checked'); 
	//console.log($('#fields_fname').val().replace(/^\s+|\s+$/g,"")==''));

	$("input").removeClass("has-error");
	
	if ($('#fields_fname').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your first name');
		$('#fields_fname').addClass("has-error");
	}
	if ($('#fields_lname').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your last name');
		$('#fields_lname').addClass("has-error");
	}
	if ($('#fields_address1').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please select your address');
		$('#fields_address1').addClass("has-error");
	}
	if ($('#fields_city').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your city');
		$('#fields_city').addClass("has-error");
	}
	if ($('#country').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your country');
		$('#country').addClass("has-error");
	}
	if ($('#fields_state').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your State');
		$('#fields_state').addClass("has-error");
	}
	if ($('#fields_zip').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your Zip Code');
		$('#fields_zip').addClass("has-error");
	}
	if ($('#fields_phone').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your phone number');
		$('#fields_phone').addClass("has-error");
	}
	if ($('#fields_email').val().replace(/^\s+|\s+$/g,"")=='') {
		errors.push('Please enter your email address');
		$('#fields_email').addClass("has-error");
	} else if ( !emailReg.test($('#fields_email').val()) ) {
		errors.push('Please enter valid email address');
		$('#fields_email').addClass("has-error");
	}
	
	/*if($('#agree_terms:checked').length == 0) {
	errors.push('Please accept our terms and condition');
	}*/
	
	
	if(typeof smtKey !== "undefined" && smtKey != '' && typeof smtVerify !== "undefined" && smtVerify == 1) {
		if (errors.length == 0 ) {
			var addr = $('input[name="fields_address1"]').val() + ', ' + $('input[name="fields_city"]').val() + ' ' + $('select[name="fields_state"]').val() + ' ' + $('input[name="fields_zip"]').val() ;
			var errmsg = "";
			var vcode = "";
			var apiUrl = "https://us-street.api.smartystreets.com/street-address"
				+ "?street=" + encodeURI(addr)
				+ "&key=" + smtKey;
			$.ajax({
			  url: apiUrl,
			  method: "get",
			  async: false,
			  beforeSend: function( xhr ) {
			  }
			})
			.done(function(resData) {
				var errmsg = "";
				if(!(resData) || !(resData[0]) || !(resData[0].analysis) || !(resData[0].analysis.dpv_match_code)) {
					vcode = "";
				} else {
					vcode = resData[0].analysis.dpv_match_code;
				}
				
				if(vcode != '' && vcode != 'N' && vcode != 'D') {
					if(typeof resData[0].delivery_line_1 !== "undefined" && resData[0].delivery_line_1 != "") {
						$('input[name="fields_address1"]').val(resData[0].delivery_line_1);
						lastAddress1 = $('input[name="fields_address1"]').val();
					}
					
					if(typeof resData[0].components !== "undefined") {
						if(typeof resData[0].components.city_name !== "undefined" && resData[0].components.city_name != "") {
							$('input[name="fields_city"]').val(resData[0].components.city_name);
						}
						if(typeof resData[0].components.zipcode !== "undefined" && resData[0].components.zipcode != "") {
							$('input[name="fields_zip"]').val(resData[0].components.zipcode);
						}
						if(typeof resData[0].components.state_abbreviation !== "undefined" && resData[0].components.state_abbreviation != "") {
							$('select[name="fields_state"]').val(resData[0].components.state_abbreviation);
						}
					}
					
				}
			})
			.fail(function() {
			})
			.always(function() {
			});
			
			
			if(vcode == '') {
				errors.push('Address could not be found');
			} else if(vcode == 'N') {
				errors.push('Address does not seem to be deliverable');
			} else if(vcode == 'D') {
				
				var html = '';
				html += '<div id="app_common_modal">';
				html += '<div class="app_modal_body" style="text-align:center;min-height:150px;"><a href="javascript:void(0);" id="app_common_modal_close">X</a>';
	
				html += '<div>'
					+ '<form method="get" action="" onSubmit="return submitAddress2();">'
					+ '<h4>' + "Please enter your Apartment/Suite/Unit # to proceed" + '</h4>'
					+ '<input type="text" name="fields_address2" id="fields_address2" placeholder="" autocomplete="off" required style="width:80%;line-height:22px;margin:10px;padding:5px" maxlength="50" value="'+ (lastAddress2 != '' ? lastAddress2 : '') +'" data-error-message="Please enter your address!" />'
					+ '<button type="submit" style="width:40%;height:30px;line-height:22px;cursor:pointer;">OK</button>'
					+ '</form>';
					+ '</div>';
	
				html += '</div>';
				html += '</div>';
				
				if (!$('#app_common_modal').length) {
					$('body').append(html);
				}
				$('#app_common_modal').fadeIn(500);
				return false;
				
			}
			
		}
	}
	
	
	if (errors.length == 0 ) {
		$('.popup-loading-wrapper').show();
		$('#fields_phone').unmask();
		document.getElementById('theForm').submit();
		return false;
	} else {
		var li = '';
		$.each(errors, function(key, value) {
			li += '<li>' + value + '</li>';
		});
	
		var html = '';
		html += '<div id="error_handler_overlay">';
		html += '<div class="error_handler_body"><a href="javascript:void(0);" id="error_handler_overlay_close">X</a><ul>' + li + '</ul></div>';
		html += '</div>';
	
		$('body').append(html);
	
		$('#error_handler_overlay').fadeIn(500);
		return false;
	}
}


$(function() {
	$(window).keydown(function(e) {
		if (e.which === 27 && $('#error_handler_overlay').length) {
			$('#error_handler_overlay').remove();
		}
	});
	
	$(document).off('click', '#error_handler_overlay');
	$(document).on('click', '#error_handler_overlay', function() {
		$(this).remove();
	});

	$(document).off('click', '#error_handler_overlay_close');
	$(document).on('click', '#error_handler_overlay_close', function() {
		$('#error_handler_overlay').remove();
	});

	$(document).on('click', '#app_common_modal_close', function() {
		//     alert('close');
		$('#app_common_modal').remove();
	});	
});

</script> 
<script>
function onlyNumbers(e,type)
{
	var keynum;
	var keychar;
	var numcheck;
	if(window.event) // IE
	{
		keynum = e.keyCode;
	}
	else if(e.which) // Netscape/Firefox/Opera
	{
		keynum = e.which;
	}
	keychar = String.fromCharCode(keynum);
	numcheck = /\d/;
	
	switch (keynum){
		case 8:    //backspace
		case 9:    //tab
		case 35:   //end
		case 36:   //home
		case 37:   //left arrow
		case 38:   //right arrow
		case 39:   //insert
		case 45:   //delete
		case 46:   //0
		case 48:   //1
		case 49:   //2
		case 50:   //3
		case 51:   //4
		case 52:   //5
		case 54:   //6
		case 55:   //7
		case 56:   //8
		case 57:   //9
		case 96:   //0
		case 97:   //1
		case 98:   //2
		case 99:   //3
		case 100:  //4
		case 101:  //5
		case 102:  //6
		case 103:  //7
		case 104:  //8
		case 105:  //9
			result2 = true;
			break;
		case 109: // dash -
			if (type == 'phone'){
				result2 = true;
			} else {
				result2 = false;
			}
			break;
		default:
			result2 = numcheck.test(keychar);
			break;
	}
	
	return result2;
}

function openNewWindow(page_url, type, window_name, width, height, top, left, features) {
    if (!type) {
        type = 'popup';
    }

    if (!width) {
        width = 480;
    }

    if (!height) {
        height = 480;
    }

    if (!top) {
        top = 50;
    }

    if (!left) {
        left = 50;
    }

    if (!features) {
        features = 'resizable,scrollbars';
    }

    if (type == 'popup') {
        var settings = 'height=' + height + ',';
        settings += 'width=' + width + ',';
        settings += 'top=' + top + ',';
        settings += 'left=' + left + ',';
        settings += features;

        win = window.open(page_url, window_name, settings);
        win.window.focus();
    } else if (type == 'modal') {
        var html = '';
        html += '<div id="app_common_modal">';
        html += '<div class="app_modal_body"><a href="javascript:void(0);" id="app_common_modal_close">X</a><iframe src="' + page_url + '" frameborder="0"></iframe></div>';
        html += '</div>';

        if (!$('#app_common_modal').length) {

            $('body').append(html);
        }
        $('#app_common_modal').fadeIn();
    }

}

<script>
// Preserve URL parameters across page navigation
(function() {
  // Get all URL parameters from current page
  var urlParams = new URLSearchParams(window.location.search);
  var paramString = urlParams.toString();

  if (paramString) {
    // Find all internal links (excluding external links, anchors, and special protocols)
    var links = document.querySelectorAll('a[href]');

    links.forEach(function(link) {
      var href = link.getAttribute('href');

      // Skip if it's an external link, anchor, mailto, tel, javascript, or #
      if (!href ||
          href.startsWith('http://') ||
          href.startsWith('https://') ||
          href.startsWith('mailto:') ||
          href.startsWith('tel:') ||
          href.startsWith('javascript:') ||
          href.startsWith('#')) {
        return;
      }

      // Add parameters to the link
      var separator = href.includes('?') ? '&' : '?';
      link.setAttribute('href', href + separator + paramString);
    });
  }
})();
</script>
<script>
// Preserve ALL URL parameters on checkout/buy buttons (with redirect parameter support)
(function() {
  var urlParams = new URLSearchParams(window.location.search);
  var paramString = urlParams.toString();

  if (!paramString) return; // Exit if no parameters

  function appendParams(url) {
    if (!url) return url;

    try {
      var urlObj = new URL(url);
      var redirectParam = urlObj.searchParams.get('redirect');

      // If there's a redirect parameter, decode and add params to it
      if (redirectParam) {
        try {
          // Decode base64 redirect URL
          var decodedRedirect = atob(redirectParam);

          // Add parameters to decoded redirect URL
          var separator = decodedRedirect.includes('?') ? '&' : '?';
          var updatedRedirect = decodedRedirect + separator + paramString;

          // Re-encode and update the redirect parameter
          urlObj.searchParams.set('redirect', btoa(updatedRedirect));
        } catch (e) {
          // If decode fails, redirect might not be base64, append params directly
          var separator = redirectParam.includes('?') ? '&' : '?';
          urlObj.searchParams.set('redirect', redirectParam + separator + paramString);
        }
      }

      // Also add parameters to the main URL
      paramString.split('&').forEach(function(param) {
        var parts = param.split('=');
        if (parts[0] && parts[1]) {
          urlObj.searchParams.set(parts[0], parts[1]);
        }
      });

      return urlObj.toString();
    } catch (e) {
      // Fallback: simple append if URL parsing fails
      var separator = url.includes('?') ? '&' : '?';
      return url + separator + paramString;
    }
  }

  function updateAllLinks() {
    // Update all external checkout links (href attribute)
    var externalLinks = document.querySelectorAll('a[href^="http"], a[href^="https"]');
    externalLinks.forEach(function(link) {
      var href = link.getAttribute('href');
      link.setAttribute('href', appendParams(href));
    });

    // Update data-url attributes (used by subscription toggle)
    var dataUrlElements = document.querySelectorAll('[data-url^="http"], [data-url^="https"]');
    dataUrlElements.forEach(function(element) {
      var dataUrl = element.getAttribute('data-url');
      element.setAttribute('data-url', appendParams(dataUrl));
    });
  }

  // Run on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updateAllLinks);
  } else {
    updateAllLinks();
  }
})();
</script>
</body>
</html>
